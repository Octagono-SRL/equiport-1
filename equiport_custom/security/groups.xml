<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <data>

        <!--        region Extra groups-->
        <!--        COMPRA E INVENTARIO-->
        <record id="allowed_transfer" model="res.groups">
            <field name="name">Permitir transferencias y costes en destino.</field>
        </record>
        <record id="supervisor_stock_order_point" model="res.groups">
            <field name="name">Encargado de terminal (Valida y realiza las reposiciones de material).</field>
        </record>
        <record id="rental_stock_picking" model="res.groups">
            <field name="name">Selección de unidades a despachar en el área de alquileres.</field>
        </record>

        <record id="grand_picking_access" model="res.groups">
            <field name="name">Concede acceso a los conduces</field>
        </record>

        <record id="request_cancel_purchase_order" model="res.groups">
            <field name="name">Solicita aprobación de cancelación de las ordenes de compra.</field>
        </record>

        <!--        CONTABILIDAD Y ADMINISTRACION-->
        <record id="rental_account_deposit" model="res.groups">
            <field name="name">Puede agregar depositos en el alquiler.</field>
        </record>

        <record id="set_security_group_for_costumer_invoices" model="res.groups">
            <field name="name">Encargado creacion de facturas sin documento de origen.</field>
        </record>

        <record id="create_customer_invoices" model="res.groups">
            <field name="name">Crear facturas sin documento de origen definido.</field>
        </record>

        <record id="allowed_to_delete_leads" model="res.groups">
            <field name="name">Puede eliminar iniciativas y oportunidades.</field>
        </record>

        <record id="allowed_adm_credit" model="res.groups">
            <field name="name">Manejo de crédito en los contactos.</field>
        </record>

        <!--        OTHERS-->
        <!--        region OTHERS CATEGORY-->

        <record id="module_category_equiport_apps" model="ir.module.category">
            <field name="name">Permisos Aplicaciones</field>
            <field name="sequence">160</field>
            <field name="parent_id" eval="False"/>
        </record>
        <record id="module_category_equiport_config" model="ir.module.category">
            <field name="name">Permisos Configuraciones</field>
            <field name="sequence">170</field>
            <field name="parent_id" eval="False"/>
        </record>
        <record id="module_category_equiport_readonly" model="ir.module.category">
            <field name="name">Permisos Solo Lectura</field>
            <field name="sequence">180</field>
            <field name="parent_id" eval="False"/>
        </record>
        <!--        endregion-->

        <record id="subscription_account_user_generate_invoice" model="res.groups">
            <field name="name">Puede generar factura.</field>
        </record>

        <!--        region Readonly GROUPS-->

        <record id="contact_account_user_readonly" model="res.groups">
            <field name="name">Solo visualizar contactos.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>

        </record>

        <record id="inventory_account_user_product_readonly" model="res.groups">
            <field name="name">Solo visualizar Inventario (Productos).</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="inventory_account_user_lot_readonly" model="res.groups">
            <field name="name">Solo visualizar Inventario (Lote de referencia interna).</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="inventory_account_user_report_readonly" model="res.groups">
            <field name="name">Solo visualizar Inventario (Informes).</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="inventory_account_user_quant_readonly" model="res.groups">
            <field name="name">Solo visualizar Inventario (Cantidad a mano).</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="sales_account_user_readonly" model="res.groups">
            <field name="name">Solo visualizar ventas.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="subscription_account_user_readonly" model="res.groups">
            <field name="name">Solo visualizar suscripciones.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="rental_account_user_readonly" model="res.groups">
            <field name="name">Solo visualizar alquileres.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="purchase_account_user_readonly" model="res.groups">
            <field name="name">Solo visualizar compras.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="rescue_account_user_readonly" model="res.groups">
            <field name="name">Solo visualizar rescates.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="repair_account_user_readonly" model="res.groups">
            <field name="name">Solo visualizar reparaciones.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>

        <record id="fleet_account_user_readonly" model="res.groups">
            <field name="name">Solo visualizar flota.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_readonly"/>
        </record>
        <!--        endregion-->

        <!--        region APPs GROUPS-->
        <record id="purchase_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion compra.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="sale_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion ventas.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="sale_subscription_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion suscripciones.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="contacts_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion contactos.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="crm_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion crm.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="inventory_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion inventario.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="barcode_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion codigo de barra.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="rental_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion alquiler.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="repair_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion reparaciones.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="rescue_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion rescates.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="fleet_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion flota.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <record id="dashboard_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion tablero.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>
        <record id="helpdesk_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion mesa de ayuda.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>
        <record id="approval_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion aprobaciones.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>
        <record id="project_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion proyecto.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>
        <record id="timesheet_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion partes de horas.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>
        <record id="sign_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion firmar.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>
        <record id="document_account_user" model="res.groups">
            <field name="name">Puede visualizar aplicacion documentos.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_apps"/>
        </record>

        <!--        endregion-->

        <!--        region SETTINGS GROUPS-->

        <record id="settings_account_op_user" model="res.groups">
            <field name="name">Puede visualizar configuraciones en aplicaciones (OPERACIONES).</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_config"/>
        </record>
        <record id="settings_account_in_user" model="res.groups">
            <field name="name">Puede visualizar configuraciones en aplicaciones (INVENTARIO).</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_config"/>
        </record>

        <record id="settings_account_pur_user" model="res.groups">
            <field name="name">Puede visualizar configuraciones en aplicaciones (COMPRAS).</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_config"/>
        </record>
        <record id="settings_account_comm_user" model="res.groups">
            <field name="name">Puede visualizar configuraciones en aplicaciones (COMERCIAL)</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_config"/>
        </record>
        <record id="settings_account_admin_user" model="res.groups">
            <field name="name">Puede visualizar configuraciones en aplicacion (ADMINISTRACION)</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_config"/>
        </record>
        <record id="settings_account_cont_user" model="res.groups">
            <field name="name">Puede visualizar configuraciones en aplicacion (CONTABILIDAD)</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="category_id" ref="equiport_custom.module_category_equiport_config"/>
        </record>
        <!--        endregion-->


        <!--        endregion-->

        <!-- region Security Categories-->
        <record id="module_category_equiport" model="ir.module.category">
            <field name="name">Permisos extra Equiport</field>
            <field name="sequence">150</field>
            <field name="parent_id" eval="False"/>
        </record>
        <record id="module_category_admin_equiport" model="ir.module.category">
            <field name="name">Administración</field>
            <field name="sequence">10</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>
        <record id="module_category_purchase_equiport" model="ir.module.category">
            <field name="name">Compras</field>
            <field name="sequence">60</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>
        <record id="module_category_accounting_equiport" model="ir.module.category">
            <field name="name">Contabilidad</field>
            <field name="sequence">20</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>
        <record id="module_category_commercial_equiport" model="ir.module.category">
            <field name="name">Comercial</field>
            <field name="sequence">30</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>
        <record id="module_category_operations_equiport" model="ir.module.category">
            <field name="name">Operaciones</field>
            <field name="sequence">40</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>

        <record id="module_category_inventory_equiport" model="ir.module.category">
            <field name="name">Inventario</field>
            <field name="sequence">50</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>

        <!-- endregion-->

        <!-- region Security Groups-->

        <!--        COMERCIAL-->

        <record id="group_commercial_user" model="res.groups">
            <field name="name">Usuario Comercial</field>
            <field name="category_id" ref="module_category_commercial_equiport"/>
        </record>

        <record id="group_commercial_manager" model="res.groups">
            <field name="name">Gerente Comercial</field>
            <field name="category_id" ref="module_category_commercial_equiport"/>
            <field name="implied_ids"
                   eval="[(4, ref('group_commercial_user')), (4, ref('allowed_adm_credit')), (4, ref('allowed_to_delete_leads')), (4, ref('subscription_account_user_generate_invoice'))]"/>
        </record>


        <!--        CONTABILIDAD-->

        <record id="group_account_user" model="res.groups">
            <field name="name">Usuario Contabilidad</field>
            <field name="category_id" ref="module_category_accounting_equiport"/>
            <field name="implied_ids" eval="[(4, ref('equiport_custom.rental_account_deposit'))]"/>
        </record>

        <record id="group_account_manager" model="res.groups">
            <field name="name">Gerente Contabilidad</field>
            <field name="category_id" ref="module_category_accounting_equiport"/>
            <field name="implied_ids"
                   eval="[(4, ref('group_account_user')), (4, ref('set_security_group_for_costumer_invoices')), (4, ref('allowed_adm_credit'))]"/>
        </record>

        <!--        ADMINISTRACION-->

        <record id="group_admin_manager" model="res.groups">
            <field name="name">Gerente Admnistrativo</field>
            <field name="category_id" ref="module_category_admin_equiport"/>
        </record>

        <record id="group_general_manager" model="res.groups">
            <field name="name">Gerente General</field>
            <field name="category_id" ref="module_category_admin_equiport"/>
            <field name="implied_ids" eval="[(4, ref('group_admin_manager'))]"/>
        </record>

        <!--        COMPRAS-->

        <record id="eq_group_purchase_user" model="res.groups">
            <field name="name">Usuario Compras</field>
            <field name="category_id" ref="module_category_purchase_equiport"/>
            <field name="implied_ids" eval="[(4, ref('request_cancel_purchase_order'))]"/>
        </record>

        <record id="eq_group_purchase_manager" model="res.groups">
            <field name="name">Encargado Compras</field>
            <field name="category_id" ref="module_category_purchase_equiport"/>
            <field name="implied_ids"
                   eval="[(4, ref('eq_group_purchase_user'))]"/>
        </record>

        <!--        OPERACIONES-->

        <record id="group_operations_user" model="res.groups">
            <field name="name">Usuario Operaciones</field>
            <field name="category_id" ref="module_category_operations_equiport"/>
        </record>

        <record id="group_operations_supervisor" model="res.groups">
            <field name="name">Supervisor Operaciones</field>
            <field name="category_id" ref="module_category_operations_equiport"/>
            <field name="implied_ids" eval="[(4, ref('group_operations_user'))]"/>
        </record>

        <record id="group_operations_manager" model="res.groups">
            <field name="name">Encargado Operaciones</field>
            <field name="category_id" ref="module_category_operations_equiport"/>
            <field name="implied_ids" eval="[(4, ref('group_operations_supervisor'))]"/>
        </record>

        <!--        INVENTARIO-->

        <record id="group_inventory_user" model="res.groups">
            <field name="name">Usuario Inventario</field>
            <field name="category_id" ref="module_category_inventory_equiport"/>
            <field name="implied_ids" eval="[(4, ref('rental_stock_picking'))]"/>
        </record>

        <record id="group_inventory_supervisor" model="res.groups">
            <field name="name">Supervisor Inventario</field>
            <field name="category_id" ref="module_category_inventory_equiport"/>
            <field name="implied_ids"
                   eval="[(4, ref('group_inventory_user')), (4, ref('supervisor_stock_order_point')), (4, ref('grand_picking_access'))]"/>
        </record>

        <record id="group_inventory_manager" model="res.groups">
            <field name="name">Encargado Inventario</field>
            <field name="category_id" ref="module_category_inventory_equiport"/>
            <field name="implied_ids" eval="[(4, ref('group_inventory_supervisor')),(4, ref('allowed_transfer'))]"/>
        </record>


        <!--        endregion-->

        <!--        region Security Rules-->
        <!--        <record id="rental_account_user_readonly_rule" model="ir.rule">-->
        <!--            <field name="name">Alquileres Solo Lectura</field>-->
        <!--            <field ref="model_sale_order" name="model_id"/>-->
        <!--            <field name="domain_force">[('is_rental_order', '=', True)]</field>-->
        <!--            <field name="groups" eval="[(4, ref('rental_account_user_readonly'))]"/>-->
        <!--            <field name="perm_read" eval="True"/>-->
        <!--            <field name="perm_create" eval="False"/>-->
        <!--            <field name="perm_unlink" eval="False"/>-->
        <!--            <field name="perm_write" eval="False"/>-->
        <!--        </record>-->

        <!--        region TEST RULES-->
        <record id="rule_allowed_location" model="ir.rule">
            <field name="name">Localidad no permitida</field>
            <field ref="model_stock_location" name="model_id"/>
            <field name="domain_force">['|', ('id', 'not in', user.allowed_stock_location_ids.ids),
                                        ('usage', '!=', 'internal')]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>

        <record id="rule_allowed_quant" model="ir.rule">
            <field name="name">Cantidades de localidad no permitida</field>
            <field ref="stock.model_stock_quant" name="model_id"/>
            <field name="domain_force">['|', ('location_id', 'not in', user.allowed_stock_location_ids.ids),
                                        ('location_id.usage', '!=', 'internal')]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>

        <record id="rule_allowed_warehouse" model="ir.rule">
            <field name="name">Almacenes no permitidos</field>
            <field ref="model_stock_warehouse" name="model_id"/>
            <field name="domain_force">[('id', 'not in', user.allowed_stock_warehouse_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>

        <record id="rule_allowed_picking_type" model="ir.rule">
            <field name="name">Operaciones no permitidas</field>
            <field ref="stock.model_stock_picking_type" name="model_id"/>
            <field name="domain_force">[('warehouse_id', 'not in', user.allowed_stock_warehouse_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>

        <record id="rule_allowed_stock_picking" model="ir.rule">
            <field name="name">Conduces no Permitidos</field>
            <field ref="stock.model_stock_picking" name="model_id"/>
            <field name="domain_force">[
                ('picking_type_id.warehouse_id', 'not in', user.allowed_stock_warehouse_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>
        <!--        endregion-->

        <record id="equiport_custom_rule_hidden_vehicle_product" model="ir.rule">
            <field name="name">Productos de vehiculos invisibles</field>
            <field ref="model_product_template" name="model_id"/>
            <field name="domain_force">[('is_vehicle', '=', False)]</field>
            <field name="perm_write" eval="False"/>
        </record>

        <!--        endregion-->
    </data>

</odoo>

