<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <data>

        <!--        region Extra groups-->
        <!--        COMPRA E INVENTARIO-->
        <record id="allowed_transfer" model="res.groups">
            <field name="name">Permitir transferencias y costes en destino.</field>
        </record>
        <record id="supervisor_stock_order_point" model="res.groups">
            <field name="name">Encargado de terminal (Valida y realiza las reposiciones de material).</field>
        </record>
        <record id="rental_stock_picking" model="res.groups">
            <field name="name">Selección de unidades a despachar en el área de alquileres.</field>
        </record>

        <record id="grand_picking_access" model="res.groups">
            <field name="name">Concede acceso a los conduces</field>
        </record>

        <record id="request_cancel_purchase_order" model="res.groups">
            <field name="name">Solicita aprobación de cancelación de las ordenes de compra.</field>
        </record>

        <!--        CONTABILIDAD Y ADMINISTRACION-->
        <record id="rental_account_deposit" model="res.groups">
            <field name="name">Puede agregar depositos en el alquiler.</field>
        </record>

        <record id="set_security_group_for_costumer_invoices" model="res.groups">
            <field name="name">Encargado creacion de facturas sin documento de origen.</field>
        </record>

        <record id="create_customer_invoices" model="res.groups">
            <field name="name">Crear facturas sin documento de origen definido.</field>
        </record>

        <record id="allowed_to_delete_leads" model="res.groups">
            <field name="name">Puede eliminar iniciativas y oportunidades.</field>
        </record>

        <record id="allowed_adm_credit" model="res.groups">
            <field name="name">Manejo de crédito en los contactos.</field>
        </record>
        <!--        endregion-->

        <!-- region Security Categories-->
        <record id="module_category_equiport" model="ir.module.category">
            <field name="name">Permisos extra Equiport</field>
            <field name="sequence">150</field>
            <field name="parent_id" eval="False"/>
        </record>
        <record id="module_category_admin_equiport" model="ir.module.category">
            <field name="name">Administración</field>
            <field name="sequence">10</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>
        <record id="module_category_accounting_equiport" model="ir.module.category">
            <field name="name">Contabilidad</field>
            <field name="sequence">20</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>
        <record id="module_category_commercial_equiport" model="ir.module.category">
            <field name="name">Comercial</field>
            <field name="sequence">30</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>
        <record id="module_category_operations_equiport" model="ir.module.category">
            <field name="name">Operaciones</field>
            <field name="sequence">40</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>

        <record id="module_category_inventory_equiport" model="ir.module.category">
            <field name="name">Inventario</field>
            <field name="sequence">50</field>
            <field name="parent_id" ref="module_category_equiport"/>
        </record>

        <!-- endregion-->

        <!-- region Security Groups-->

        <!--        COMERCIAL-->

        <record id="group_commercial_user" model="res.groups">
            <field name="name">Usuario Comercial</field>
            <field name="category_id" ref="module_category_commercial_equiport"/>
        </record>

        <record id="group_commercial_manager" model="res.groups">
            <field name="name">Gerente Comercial</field>
            <field name="category_id" ref="module_category_commercial_equiport"/>
            <field name="implied_ids"
                   eval="[(4, ref('group_commercial_user')), (4, ref('allowed_adm_credit')), (4, ref('allowed_to_delete_leads'))]"/>
        </record>


        <!--        CONTABILIDAD-->

        <record id="group_account_user" model="res.groups">
            <field name="name">Usuario Contabilidad</field>
            <field name="category_id" ref="module_category_accounting_equiport"/>
        </record>

        <record id="group_account_manager" model="res.groups">
            <field name="name">Gerente Contabilidad</field>
            <field name="category_id" ref="module_category_accounting_equiport"/>
            <field name="implied_ids"
                   eval="[(4, ref('group_account_user')), (4, ref('set_security_group_for_costumer_invoices')), (4, ref('allowed_adm_credit'))]"/>
        </record>

        <!--        ADMINISTRACION-->

        <record id="group_admin_manager" model="res.groups">
            <field name="name">Gerente Admnistrativa</field>
            <field name="category_id" ref="module_category_admin_equiport"/>
        </record>

        <record id="group_general_manager" model="res.groups">
            <field name="name">Gerente General</field>
            <field name="category_id" ref="module_category_admin_equiport"/>
            <field name="implied_ids" eval="[(4, ref('group_admin_manager'))]"/>
        </record>

        <!--        OPERACIONES-->

        <record id="group_operations_user" model="res.groups">
            <field name="name">Usuario Operaciones</field>
            <field name="category_id" ref="module_category_operations_equiport"/>
        </record>

        <record id="group_operations_supervisor" model="res.groups">
            <field name="name">Supervisor Operaciones</field>
            <field name="category_id" ref="module_category_operations_equiport"/>
            <field name="implied_ids" eval="[(4, ref('group_operations_user'))]"/>
        </record>

        <record id="group_operations_manager" model="res.groups">
            <field name="name">Encargado Operaciones</field>
            <field name="category_id" ref="module_category_operations_equiport"/>
            <field name="implied_ids" eval="[(4, ref('group_operations_supervisor'))]"/>
        </record>

        <!--        INVENTARIO-->

        <record id="group_inventory_user" model="res.groups">
            <field name="name">Usuario Inventario</field>
            <field name="category_id" ref="module_category_inventory_equiport"/>
            <field name="implied_ids" eval="[(4, ref('rental_stock_picking'))]"/>
        </record>

        <record id="group_inventory_supervisor" model="res.groups">
            <field name="name">Supervisor Inventario</field>
            <field name="category_id" ref="module_category_inventory_equiport"/>
            <field name="implied_ids"
                   eval="[(4, ref('group_inventory_user')), (4, ref('supervisor_stock_order_point')), (4, ref('grand_picking_access'))]"/>
        </record>

        <record id="group_inventory_manager" model="res.groups">
            <field name="name">Encargado Inventario</field>
            <field name="category_id" ref="module_category_inventory_equiport"/>
            <field name="implied_ids" eval="[(4, ref('group_inventory_supervisor')),(4, ref('allowed_transfer'))]"/>
        </record>


        <!--        endregion-->

        <!--        region Security Rules-->

        <record id="rule_allowed_location" model="ir.rule">
            <field name="name">Localidad permitida</field>
            <field ref="model_stock_location" name="model_id"/>
            <field name="domain_force">['|',('id', 'in', user.allowed_stock_location_ids.ids),('usage', '!=', 'internal')]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>

        <record id="rule_allowed_quant" model="ir.rule">
            <field name="name">Cantidades de localidad permitida</field>
            <field ref="stock.model_stock_quant" name="model_id"/>
            <field name="domain_force">['|',('location_id', 'in', user.allowed_stock_location_ids.ids),('location_id.usage', '!=', 'internal')]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>

        <record id="rule_allowed_warehouse" model="ir.rule">
            <field name="name">Almacen permitidos</field>
            <field ref="model_stock_warehouse" name="model_id"/>
            <field name="domain_force">[('id', 'in', user.allowed_stock_warehouse_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>

        <record id="rule_allowed_picking_type" model="ir.rule">
            <field name="name">Operaciones permitidas</field>
            <field ref="stock.model_stock_picking_type" name="model_id"/>
            <field name="domain_force">[('warehouse_id', 'in', user.allowed_stock_warehouse_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>
        
        <record id="rule_allowed_stock_picking" model="ir.rule">
            <field name="name">Conduces Permitidos</field>
            <field ref="stock.model_stock_picking" name="model_id"/>
            <field name="domain_force">[('picking_type_id.warehouse_id', 'in', user.allowed_stock_warehouse_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('group_inventory_user')), (4, ref('group_inventory_supervisor'))]"/>
            <field name="perm_read" eval="True"/>
        </record>

        <record id="equiport_custom_rule_hidden_vehicle_product" model="ir.rule">
            <field name="name">Productos de vehiculos invisibles</field>
            <field ref="model_product_template" name="model_id"/>
            <field name="domain_force">[('is_vehicle', '=', False)]</field>
            <field name="perm_write" eval="False"/>
        </record>

        <!--        endregion-->
    </data>

</odoo>

